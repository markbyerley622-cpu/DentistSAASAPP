# SmileDesk Backend Environment Configuration
# Copy this file to .env and fill in your values

# ===========================================
# SERVER
# ===========================================
PORT=3001
NODE_ENV=development
API_URL=https://your-app.com

# Frontend URL for CORS
FRONTEND_URL=http://localhost:5173

# ===========================================
# DATABASE
# ===========================================
DATABASE_URL=postgresql://user:password@host:5432/smiledesk
# Or use individual variables:
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=smiledesk
# DB_USER=postgres
# DB_PASSWORD=password

# ===========================================
# JWT AUTHENTICATION (Required)
# ===========================================
# IMPORTANT: Generate strong random secrets for production!
# Example: openssl rand -hex 32
JWT_SECRET=your-jwt-secret-key-minimum-32-characters
JWT_REFRESH_SECRET=your-jwt-refresh-secret-key-minimum-32-characters

# ===========================================
# ENCRYPTION (Required for API key storage)
# ===========================================
# 32-character hex key for encrypting sensitive data
# Generate with: openssl rand -hex 16
ENCRYPTION_KEY=your-32-character-encryption-key

# ===========================================
# NOTIFYRE SMS (Required for SMS functionality)
# ===========================================
# Get these from: https://app.notifyre.com/ -> Developer -> API Tokens
NOTIFYRE_ACCOUNT_ID=your-notifyre-account-id
NOTIFYRE_API_TOKEN=your-notifyre-api-token

# Your Notifyre virtual number (E.164 format)
# Note: Number is stored in Supabase settings, this is optional fallback
NOTIFYRE_FROM_NUMBER=+61400000000

# Webhook signature secret (for security - optional)
# Set this in Notifyre Dashboard -> Developer -> Webhooks
NOTIFYRE_WEBHOOK_SECRET=your-webhook-signature-secret

# ===========================================
# ERROR MONITORING (Optional but recommended)
# ===========================================
# Get your DSN from: https://sentry.io/
SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# ===========================================
# LOGGING
# ===========================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# ===========================================
# TWILIO (Optional - for OTP only)
# ===========================================
# Only needed if using phone-based password reset
# TWILIO_ACCOUNT_SID=your-twilio-account-sid
# TWILIO_AUTH_TOKEN=your-twilio-auth-token
# TWILIO_PHONE_NUMBER=+1234567890

# ===========================================
# WEBHOOK ENDPOINTS
# ===========================================
# Configure these URLs in your PBX and Vonage Dashboard:
#
# PBX Missed Call Webhooks (Tier 1 - Cloud VoIP):
#   Generic:     POST https://your-api.com/api/pbx/missed-call
#   RingCentral: POST https://your-api.com/api/pbx/missed-call/ringcentral
#   8x8:         POST https://your-api.com/api/pbx/missed-call/8x8
#   Nextiva:     POST https://your-api.com/api/pbx/missed-call/nextiva
#   Dialpad:     POST https://your-api.com/api/pbx/missed-call/dialpad
#   Zoom Phone:  POST https://your-api.com/api/pbx/missed-call/zoom
#   Vonage:      POST https://your-api.com/api/pbx/missed-call/vonage
#   GoTo Connect:POST https://your-api.com/api/pbx/missed-call/goto
#   Webex:       POST https://your-api.com/api/pbx/missed-call/webex
#
# PBX Missed Call Webhooks (Tier 2 - Australian Telcos):
#   Telstra:     POST https://your-api.com/api/pbx/missed-call/telstra
#   Optus:       POST https://your-api.com/api/pbx/missed-call/optus
#   BroadSoft:   POST https://your-api.com/api/pbx/missed-call/broadsoft
#                (MyNetFone, TPG, Symbio, NodeOne, MaxoTel, Crazytel)
#
# PBX Missed Call Webhooks (Tier 3 - On-Prem):
#   3CX:         POST https://your-api.com/api/pbx/missed-call/3cx
#   FreePBX:     POST https://your-api.com/api/pbx/missed-call/freepbx
#                (Also works with Asterisk, Elastix, Issabel)
#
# Notifyre SMS Webhooks:
#   SMS Received: POST https://your-api.com/api/sms/incoming
#   SMS Sent:     POST https://your-api.com/api/sms/status
#
# Health Check:
#   GET https://your-api.com/health
#   GET https://your-api.com/api/pbx/health (lists all supported PBX systems)
